var $j=jQuery.noConflict(),qcubed,qc;$j.fn.extend({wait:function(e,t){e=e||1e3;t=t||"fx";return this.queue(t,function(){var t=this;setTimeout(function(){$j(t).dequeue()},e)})}});$j.ajaxQueue=function(e){if(typeof $j.ajaxq==="undefined"){$j.ajax(e)}else{$j.ajaxq("qcu.be",e)}};$j.ajaxSync=function(e){var t=$j.ajaxSync.fn,n=$j.ajaxSync.data;pos=t.length;t[pos]={error:e.error,success:e.success,complete:e.complete,done:false};n[pos]={error:[],success:[],complete:[]};e.error=function(){n[pos].error=arguments};e.success=function(){n[pos].success=arguments};e.complete=function(){var e;n[pos].complete=arguments;t[pos].done=true;if(pos===0||!t[pos-1])for(e=pos;e<t.length&&t[e].done;e++){if(t[e].error){t[e].error.apply($j,n[e].error)}if(t[e].success){t[e].success.apply($j,n[e].success)}if(t[e].complete){t[e].complete.apply($j,n[e].complete)}t[e]=null;n[e]=null}};return $j.ajax(e)};$j.ajaxSync.fn=[];$j.ajaxSync.data=[];qcubed={recordControlModification:function(e,t,n){if(!qcubed.controlModifications[e]){qcubed.controlModifications[e]={}}qcubed.controlModifications[e][t]=n},postBack:function(e,t,n,r){var e=$j("#Qform__FormId").attr("value"),i=$j("#"+e);if(r&&typeof r!=="string"){r=$j.param({Qform__FormParameter:r});i.append('<input type="hidden" name="Qform__FormParameterType" value="obj">')}$j("#Qform__FormControl").val(t);$j("#Qform__FormEvent").val(n);$j("#Qform__FormParameter").val(r);$j("#Qform__FormCallType").val("Server");$j("#Qform__FormUpdates").val(this.formUpdates());$j("#Qform__FormCheckableControls").val(this.formCheckableControls(e,"Server"));i.trigger("submit")},formUpdates:function(){var e="",t,n;for(t in qcubed.controlModifications){for(n in qcubed.controlModifications[t]){e+=t+" "+n+" "+qcubed.controlModifications[t][n]+"\n"}}qcubed.controlModifications={};return e},formCheckableControls:function(e,t){var n=$j("#"+e).find("input,select,textarea"),r="";n.each(function(e){var n=$j(this),i=n.attr("type"),s;if((i==="checkbox"||i==="radio")&&(t==="Ajax"||!$this.attr("disabled"))){s=$this.attr("id");if(s.indexOf("_")>=0){if(s.indexOf("_0")>=0){r+=" "+s.substring(0,s.length-2)}}else{r+=" "+s}}});return r.length?r.substring(1):""},getPostData:function(e,t,n,r,i){var s=$j("#"+e).find("input,select,textarea"),o="";if(r&&typeof r!=="string"){o=$j.param({Qform__FormParameter:r});s=s.not("#Qform__FormParameter")}else{$j("#Qform__FormParameter").val(r)}$j("#Qform__FormControl").val(t);$j("#Qform__FormEvent").val(n);$j("#Qform__FormCallType").val("Ajax");$j("#Qform__FormUpdates").val(this.formUpdates());$j("#Qform__FormCheckableControls").val(this.formCheckableControls(e,"Ajax"));s.each(function(){var e=$j(this),t=e.attr("type"),n=e.attr("id"),r=e.attr("name"),i,s,u=e.val();if(typeof t==="undefined"){t=this.type}switch(t){case"checkbox":case"radio":if(e.attr("checked")){s=r.indexOf("[");if(s>0){i=r.substring(0,s)+"_"}else{i=r+"_"}if(n.substring(0,i.length)===i){o+="&"+r+"="+n.substring(i.length)}else{o+="&"+n+"="+u}}break;case"select-multiple":e.find(":selected").each(function(e){var t=$j(this);o+="&"+t.parents("select").attr("name")+"="+t.val()});break;default:o+="&"+n+"=";if(u){u=u.replace(/\%/g,"%25");u=u.replace(/&/g,escape("&"));u=u.replace(/\+/g,"%2B")}o+=u;break}});return o},postAjax:function(strForm,strControl,strEvent,mixParameter,strWaitIconControlId){var objForm=$j("#"+strForm),strFormAction=objForm.attr("action"),qFormParams={};qFormParams.form=strForm;qFormParams.control=strControl;qFormParams.event=strEvent;qFormParams.param=mixParameter;qFormParams.waitIcon=strWaitIconControlId;if(strWaitIconControlId){this.objAjaxWaitIcon=this.getWrapper(strWaitIconControlId);if(this.objAjaxWaitIcon){this.objAjaxWaitIcon.style.display="inline"}}$j.ajaxQueue({url:strFormAction,type:"POST",qFormParams:qFormParams,fnInit:function(e){e.data=qcubed.getPostData(e.qFormParams.form,e.qFormParams.control,e.qFormParams.event,e.qFormParams.param,e.qFormParams.waitIcon)},error:function(e,t,n){var r=e.responseText,i,s;if(e.status!==0||r.length>0){if(r.substr(0,6)==="<html>"){alert("An error occurred during AJAX Response parsing.\r\n\r\nThe error response will appear in a new popup.");i=window.open("about:blank","qcubed_error","menubar=no,toolbar=no,location=no,status=no,scrollbars=yes,resizable=yes,width=1000,height=700,left=50,top=50");i.focus();i.document.write(r);return false}else{s=$j('<div id="Qcubed_AJAX_Error" />').html(r).dialog({modal:true,height:200,width:400,autoOpen:true,title:"An Error Occurred",buttons:{Ok:function(){$j(this).dialog("close")}}});return false}}},success:function(xml){var strCommands=[];$j(xml).find("control").each(function(){var e=$j(this),t="#"+e.attr("id"),n=e.text(),r=$j(t),i;if(t==="#Qform__FormState"){r.val(n)}else{if(r.length&&!r.get(0).wrapper){if(e.attr("data-hasrel")){i=r.parents("[data-rel='"+t+"']").last();if(i.length){r.insertBefore(i)}$j("[data-rel='"+t+"']").remove()}r.before(n).remove()}else{$j(t+"_ctl").html(n)}}}).end().find("command").each(function(){strCommands.push($j(this).text())});eval(strCommands.join(""));if(qcubed.objAjaxWaitIcon){$j(qcubed.objAjaxWaitIcon).hide()}}})},initialize:function(){this.loadJavaScriptFile=function(e,t){if(e.indexOf("/")===0){e=qc.baseDir+e}else if(e.indexOf("http")!==0){e=qc.jsAssets+"/"+e}$j.ajax({url:e,success:t,dataType:"script",cache:true})};this.loadStyleSheetFile=function(e,t){if(e.indexOf("/")===0){e=qc.baseDir+e}else if(e.indexOf("http")!==0){e=qc.cssAssets+"/"+e}$j("head").append('<link rel="stylesheet" href="'+e+'" type="text/css" />')};this.wrappers=[];return this}};qcubed._objTimers={};qcubed.clearTimeout=function(e){if(qcubed._objTimers[e]){clearTimeout(qcubed._objTimers[e]);qcubed._objTimers[e]=null}};qcubed.setTimeout=function(e,t,n){qcubed.clearTimeout(e);qcubed._objTimers[e]=setTimeout(t,n)};qcubed.terminateEvent=function(e){e=qcubed.handleEvent(e);if(e){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;e.returnValue=false}return false};qcubed.getControl=function(e){if(typeof e==="string"){return document.getElementById(e)}else{return e}};qcubed.getWrapper=function(e){var t=qcubed.getControl(e);if(!t){if(typeof e==="string"){return this.getControl(e+"_ctl")}return null}else if(t.wrapper){return t.wrapper}return t};qcubed.controlModifications={};qcubed.javascriptStyleToQcodo={};qcubed.javascriptStyleToQcodo.backgroundColor="BackColor";qcubed.javascriptStyleToQcodo.borderColor="BorderColor";qcubed.javascriptStyleToQcodo.borderStyle="BorderStyle";qcubed.javascriptStyleToQcodo.border="BorderWidth";qcubed.javascriptStyleToQcodo.height="Height";qcubed.javascriptStyleToQcodo.width="Width";qcubed.javascriptStyleToQcodo.text="Text";qcubed.javascriptWrapperStyleToQcodo={};qcubed.javascriptWrapperStyleToQcodo.position="Position";qcubed.javascriptWrapperStyleToQcodo.top="Top";qcubed.javascriptWrapperStyleToQcodo.left="Left";qcubed.recordControlModification=function(e,t,n){if(!qcubed.controlModifications[e]){qcubed.controlModifications[e]={}}qcubed.controlModifications[e][t]=n};qcubed.registerControl=function(e){var t=qcubed.getControl(e),n;if(!t){return}n=this.getControl(t.id+"_ctl");if(!n){n=t}else{n.control=t;t.wrapper=n;qcubed.wrappers[n.id]=n}n.updateStyle=function(e,t){var n=this.control?this.control:this,r,i,s;switch(e){case"className":n.className=t;qcubed.recordControlModification(n.id,"CssClass",t);break;case"parent":if(t){r=qcubed.getControl(t);r.appendChild(this);qcubed.recordControlModification(n.id,"Parent",t)}else{i=this.parentNode;i.removeChild(this);qcubed.recordControlModification(n.id,"Parent","")}break;case"displayStyle":n.style.display=t;qcubed.recordControlModification(n.id,"DisplayStyle",t);break;case"display":s=$j(this);if(t){s.show();qcubed.recordControlModification(n.id,"Display","1")}else{s.hide();qcubed.recordControlModification(n.id,"Display","0")}break;case"enabled":if(t){n.disabled=false;qcubed.recordControlModification(n.id,"Enabled","1")}else{n.disabled=true;qcubed.recordControlModification(n.id,"Enabled","0")}break;case"width":case"height":n.style[e]=t;if(qcubed.javascriptStyleToQcodo[e]){qcubed.recordControlModification(n.id,qcubed.javascriptStyleToQcodo[e],t)}if(this.handle){this.updateHandle()}break;case"text":n.innerHTML=t;qcubed.recordControlModification(n.id,"Text",t);break;default:if(qcubed.javascriptWrapperStyleToQcodo[e]){this.style[e]=t;qcubed.recordControlModification(n.id,qcubed.javascriptWrapperStyleToQcodo[e],t)}else{n.style[e]=t;if(qcubed.javascriptStyleToQcodo[e]){qcubed.recordControlModification(n.id,qcubed.javascriptStyleToQcodo[e],t)}}break}};n.getAbsolutePosition=function(){var e=this.control?this.control:this,t=$j(e).offset();return{x:t.left,y:t.top}};n.setAbsolutePosition=function(e,t,n){var r=this.offsetParent;while(r){e-=r.offsetLeft;t-=r.offsetTop;r=r.offsetParent}if(n){if(this.parentNode.nodeName.toLowerCase()!=="form"){e=Math.max(e,0);t=Math.max(t,0);e=Math.min(e,this.offsetParent.offsetWidth-this.offsetWidth);t=Math.min(t,this.offsetParent.offsetHeight-this.offsetHeight)}}this.updateStyle("left",e+"px");this.updateStyle("top",t+"px")};n.toggleDisplay=function(e){if(e){if(e==="show"){this.updateStyle("display",true)}else{this.updateStyle("display",false)}}else this.updateStyle("display",this.style.display==="none")};n.toggleEnabled=function(e){var t=this.control?this.control:this;if(e){if(e==="enable"){this.updateStyle("enabled",true)}else{this.updateStyle("enabled",false)}}else{this.updateStyle("enabled",t.disabled)}};n.registerClickPosition=function(e){var t=this.control?this.control:this,n=e.pageX-t.offsetLeft,r=e.pageY-t.offsetTop;$j("#"+t.id+"_x").val(n);$j("#"+t.id+"_y").val(r)};if(n.control){n.focus=function(){$j(this.control).focus()}}if(n.control){n.select=function(){$j(this.control).select()}}n.blink=function(e,t){var n=this.control?this.control:this;$j(n).css("background-color",""+e).animate({backgroundColor:""+t},500)}};qcubed.registerControlArray=function(e){var t=e.length,n;for(n=0;n<t;n++){this.registerControl(e[n])}};qc=qcubed;qc.pB=qc.postBack;qc.pA=qc.postAjax;qc.getC=qc.getControl;qc.getW=qc.getWrapper;qc.regC=qc.registerControl;qc.regCA=qc.registerControlArray;qc.initialize()